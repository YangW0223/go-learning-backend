# Week 3 每日拆分（Day 1 ~ Day 7）

### Day 1：通读认证链路

- 今日目标：掌握 token 生成与验证全路径。
- 操作清单：
  - 阅读 `internal/auth`。
  - 阅读鉴权 middleware。
  - 标注 token 过期与签名错误处理点。
- 完成标准：
  - 能完整讲出认证链路。

### Day 2：设计受保护接口

- 今日目标：确定新接口权限规则。
- 操作清单：
  - 选定接口（如 `GET /api/v1/profile/detail`）。
  - 定义输入输出与错误码。
  - 写一页简要接口说明。
- 完成标准：
  - 有明确的鉴权规则和返回约定。

### Day 3：实现接口主体

- 今日目标：完成 handler + service + repository 基础实现。
- 操作清单：
  - 接入路由。
  - 实现服务逻辑。
  - 查询当前用户数据。
- 完成标准：
  - 合法 token 可访问接口并返回数据。

### Day 4：补失败场景

- 今日目标：覆盖所有授权失败路径。
- 操作清单：
  - 测试无 token、坏 token、过期 token。
  - 明确 401 与 403 的分界。
  - 统一错误文案。
- 完成标准：
  - 失败行为符合预期且一致。

### Day 5：自动化验证

- 今日目标：把认证场景固化成测试。
- 操作清单：
  - 增加认证相关测试。
  - 执行 `go test ./...`。
  - 检查回归影响。
- 完成标准：
  - 测试覆盖 happy path + error path。

### Day 6：安全加固

- 今日目标：补充最小安全检查。
- 操作清单：
  - 审查 token TTL 与 secret 配置。
  - 校验敏感日志是否泄露。
  - 梳理接口最小权限原则。
- 完成标准：
  - 有一份最小安全检查项清单。

### Day 7：复盘与沉淀

- 今日目标：固定认证模块知识卡片。
- 操作清单：
  - 写“认证模块读图说明”。
  - 记录本周关键决策与取舍。
  - 准备 Week 4 缓存切入点。
- 完成标准：
  - 文档可让他人快速理解认证设计。

