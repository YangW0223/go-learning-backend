# Week 4 每日拆分（Day 1 ~ Day 7）

### Day 1：缓存方案设计

- 今日目标：定义缓存 key、TTL、一致性策略。
- 操作清单：
  - 选择缓存场景（Todo 列表）。
  - 定义 key 格式与 TTL。
  - 明确失效触发条件。
- 完成标准：
  - 有可执行缓存设计草案。

### Day 2：实现读取与回源

- 今日目标：实现先查缓存、未命中回源 DB。
- 操作清单：
  - 在 service/repository 加缓存读取逻辑。
  - 未命中后写回缓存。
  - 打印命中/未命中日志。
- 完成标准：
  - 接口功能正常且可观察命中情况。

### Day 3：实现失效策略

- 今日目标：确保写操作后缓存不脏。
- 操作清单：
  - 创建/更新/删除后失效对应 key。
  - 处理批量 key 或用户维度 key。
  - 手动回归验证。
- 完成标准：
  - 修改数据后再次查询可得到最新结果。

### Day 4：压力与边界验证

- 今日目标：评估缓存收益与风险。
- 操作清单：
  - 连续请求观察耗时变化。
  - 模拟 Redis 不可用场景。
  - 验证降级是否回源 DB。
- 完成标准：
  - 缓存失效/降级行为可解释。

### Day 5：测试与文档

- 今日目标：把缓存行为写进测试和说明。
- 操作清单：
  - 补缓存场景测试。
  - 补缓存一致性文档。
  - 跑 `go test ./...`。
- 完成标准：
  - 缓存机制有代码和文档双重保障。

### Day 6：优化清理

- 今日目标：简化实现并提升可维护性。
- 操作清单：
  - 清理重复逻辑。
  - 统一缓存 key 构造函数。
  - 复查错误处理。
- 完成标准：
  - 缓存代码可读性明显提升。

### Day 7：复盘与迁移

- 今日目标：沉淀缓存策略决策。
- 操作清单：
  - 记录“为什么这样设计 key/TTL”。
  - 记录 2~3 个潜在脏数据风险。
  - 输出 Week 5 错误治理切入清单。
- 完成标准：
  - 有可审阅的缓存复盘记录。

