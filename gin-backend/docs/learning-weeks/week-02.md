# Week 2 每日拆分（Day 1 ~ Day 7）

### Day 1：读懂现有数据模型

- 今日目标：明确当前表结构、索引、字段语义。
- 操作清单：
  - 阅读 `migrations` 下所有 SQL。
  - 画出现有核心表关系（至少 users 与 todos）。
  - 写出准备新增字段的设计理由。
- 完成标准：
  - 有一份字段变更设计说明（字段类型、默认值、可空性）。

### Day 2：编写并验证 migration

- 今日目标：完成 up/down 迁移脚本。
- 操作清单：
  - 新建 migration（例如新增 `due_at`）。
  - 执行 `make migrate-up`。
  - 执行 `make migrate-down`，再 `make migrate-up`。
- 完成标准：
  - up/down 可重复执行且无报错。

### Day 3：改 repository

- 今日目标：仓储层支持新字段读写。
- 操作清单：
  - 修改查询与写入 SQL。
  - 更新模型扫描与参数绑定。
  - 自测新增字段入库和读出。
- 完成标准：
  - repository 层 CRUD 都处理了新字段。

### Day 4：改 service + handler + DTO

- 今日目标：接口层完成新字段透传与校验。
- 操作清单：
  - 修改 DTO 请求与响应结构。
  - 修改 handler 参数绑定与返回。
  - 修改 service 业务逻辑与默认值处理。
- 完成标准：
  - API 可创建并查询新字段。

### Day 5：联调与回归

- 今日目标：保证改造不破坏旧功能。
- 操作清单：
  - 跑 `go test ./...`。
  - 手动回归注册、登录、Todo 列表。
  - 补充文档说明字段用途。
- 完成标准：
  - 全量测试通过，旧接口行为不回退。

### Day 6：问题修复日

- 今日目标：修复本周暴露的问题。
- 操作清单：
  - 清理日志中的异常、边界 bug。
  - 补至少 1 个失败场景测试。
  - 再次执行迁移验证。
- 完成标准：
  - 关键问题已收敛，测试更完整。

### Day 7：复盘与归档

- 今日目标：完成周总结并冻结 Week 2 产物。
- 操作清单：
  - 输出变更清单（DB、代码、接口）。
  - 记录 3 个关键坑点与规避方法。
  - 为 Week 3 制定接口扩展目标。
- 完成标准：
  - 有可复现的周成果文档。

