# Gin Backend 学习计划（前端转后端）

目标：基于本项目（Gin + Postgres + Redis + JWT + Docker）完成一条“可上线的后端能力链路”学习。

## 学习原则

1. 以功能为驱动，不先堆理论。
2. 每周必须有可运行产出（代码 + 文档）。
3. 每次改动都要经过最小验证（接口可调用、服务可启动、测试可通过）。

## 8 周路线图

### 第 1 周：跑通全链路

- 目标：知道一个请求如何穿过 `router -> handler -> service -> repository -> db/cache`。
- 任务：
  - 使用 `make docker-up` 启动本地栈。
  - 用 curl 或 API 客户端调用注册、登录、Todo 接口。
  - 阅读并标注以下目录：`cmd/server`、`internal/transport/http`、`internal/service`、`internal/repository`。
  - 画一张请求流转图并写在你的学习笔记里。
- 验收：
  - 你能口头解释“登录接口从请求到响应的完整调用链”。

### 第 2 周：数据库与迁移

- 目标：掌握表结构演进和仓储层改动。
- 任务：
  - 阅读 `migrations` 与 `scripts/migrate`。
  - 给 Todo 增加一个字段（例如 `due_at` 或 `priority`）。
  - 写 migration，并执行 `make migrate-up`、`make migrate-down`。
  - 同步修改 DTO、handler、service、repository。
- 验收：
  - 新字段可以创建、查询、更新，且可回滚。

### 第 3 周：认证与授权

- 目标：吃透 JWT 和鉴权中间件。
- 任务：
  - 完整追踪 `auth` 相关逻辑（签发、解析、注入上下文）。
  - 新增一个受保护接口（例如 `GET /api/v1/profile/detail`）。
  - 明确 401/403 的边界并在代码中体现。
- 验收：
  - 无 Token、坏 Token、过期 Token、合法 Token 行为都符合预期。

### 第 4 周：Redis 缓存实践

- 目标：理解缓存命中、失效和一致性。
- 任务：
  - 给 Todo 列表增加缓存读取与回源。
  - 在创建/更新/删除 Todo 后做缓存失效。
  - 通过日志观察命中与未命中。
- 验收：
  - 你能解释“为什么这个点适合加缓存、何时会脏数据、如何降低风险”。

### 第 5 周：错误处理与配置治理

- 目标：形成统一错误语义和配置管理习惯。
- 任务：
  - 梳理项目中的错误返回路径，统一到 `AppError` 模式。
  - 补齐常见错误码映射（400/401/403/404/409/500）。
  - 整理环境变量最小集与默认值策略（dev/docker/prod）。
- 验收：
  - 同类错误在不同接口上响应结构一致。

### 第 6 周：测试体系建设

- 目标：建立“可重构”的安全网。
- 任务：
  - 为 service 层补单元测试（mock repository）。
  - 为关键 handler 补接口测试（成功、失败、边界）。
  - 执行 `go test ./...` 并保持通过。
- 验收：
  - 至少 1 个核心业务链路具备完整测试覆盖（happy path + error path）。

### 第 7 周：可观测性与故障排查

- 目标：掌握基础线上排障能力。
- 任务：
  - 阅读日志、健康检查、`/metrics`。
  - 人为制造一次故障（如数据库不可达），记录现象与恢复步骤。
  - 总结“先看什么、再看什么”的排查顺序。
- 验收：
  - 形成一份 10 分钟内可执行的排障清单。

### 第 8 周：独立交付一个完整功能

- 目标：把前 7 周能力串起来。
- 任务：
  - 选一个真实增强功能（标签、分页过滤、截止时间提醒三选一）。
  - 完成：migration、接口、鉴权、缓存、测试、文档。
  - 用 PR 方式整理变更说明。
- 验收：
  - 其他人按文档可复现你的功能并完成验证。

## 每周固定节奏（建议）

1. 周一：阅读代码 + 画本周改动面。
2. 周二到周四：编码实现。
3. 周五：补测试 + 自测 + 文档沉淀。
4. 周末：复盘（本周关键概念、踩坑、下周风险）。

## 每天最小学习闭环（60~90 分钟）

1. 15 分钟：看旧代码，明确今天只改一个目标点。
2. 30~60 分钟：写代码。
3. 15 分钟：跑验证（至少 `go test ./...` 或关键接口自测）。
4. 5 分钟：记录“今天学到了什么”。

## 阶段性检查点

- 第 2 周结束：你能独立做一个字段级改造并带迁移。
- 第 4 周结束：你能设计一个缓存策略并解释失效逻辑。
- 第 6 周结束：你能为新增功能先写测试再实现。
- 第 8 周结束：你能独立完成一个小功能从设计到交付。

## 建议先做的第一件事（今天）

1. 跑 `make docker-up`，确认服务可用。
2. 调通 `POST /api/v1/auth/register` 和 `POST /api/v1/auth/login`。
3. 在本文件底部追加你的学习日志（日期 + 做了什么 + 遇到什么问题）。

---

你可以把这份计划当作执行清单；每周只做一件“可交付”的事，不追求一次学完所有概念。

## 学习执行汇总文档

- 按“每周一个文件”的执行清单请查看：
  - `docs/gin-backend-learning-weekly-summary.md`
  - `docs/learning-weeks/week-01.md` 到 `docs/learning-weeks/week-08.md`
