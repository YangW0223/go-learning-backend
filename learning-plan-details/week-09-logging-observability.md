# Week 09：日志与可观测性

## 本周目标

构建基础可观测能力，能通过日志定位一次 500 错误。

## 详细步骤

1. 选择结构化日志格式（建议 JSON）。
2. 为每次请求生成并透传 `request_id`。
3. 记录核心字段：method、path、status、latency、error。
4. 在错误路径统一打点，避免“无日志错误”。
5. 增加基础指标（请求数、错误数、耗时分布，先从最小集合做起）。
6. 手动制造一个 500 场景并演练日志排查流程。

## 建议实践清单

- 日志级别分层（info/warn/error）。
- 敏感信息脱敏（token、密码、手机号等）。
- request_id 在 handler 到 store 全链路可追踪。

## 验收清单

- [ ] 请求日志包含 request_id 与耗时。
- [ ] 错误日志信息足够定位问题。
- [ ] 能复盘一次 500 的定位过程。

## 产出物

- 日志中间件和日志规范文档。
- 一次错误排查演示记录。

## 常见风险与排查

- 日志过多但无关键信息：统一关键字段模板。
- 没有上下文串联：request_id 必须贯穿。
