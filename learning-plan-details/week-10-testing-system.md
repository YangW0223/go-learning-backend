# Week 10：测试体系

## 本周目标

建立可回归的测试体系，核心逻辑覆盖率达到 60%+。

## 详细步骤

1. 列出核心业务路径并按优先级排序。
2. 为 service 层编写表驱动单测。
3. 为 handler 层补接口测试（含异常分支）。
4. 增加一组端到端 API 测试（启动服务后走真实 HTTP 请求）。
5. 跑 `go test ./...` 并修复不稳定测试。
6. 输出覆盖率报告并标注低覆盖模块。

## 建议实践清单

- 测试命名遵循“场景_预期结果”。
- 每个 bug 修复都配套回归测试。
- 避免依赖真实外部环境导致测试脆弱。

## 验收清单

- [ ] 核心逻辑覆盖率 >= 60%。
- [ ] 端到端 API 测试已落地。
- [ ] `go test ./...` 稳定通过。

## 产出物

- 单测/接口测试/E2E 测试代码。
- 覆盖率报告与测试策略文档。

## 常见风险与排查

- 只测 happy path：必须补错误和边界场景。
- 测试强耦合实现细节：优先测试行为，不测试私有实现。
