# Week 07：认证与鉴权

## 本周目标

实现注册/登录和 Todo 鉴权中间件，确保未授权请求被拦截。

## 详细步骤

1. 设计用户模型：账号唯一性、密码哈希存储（bcrypt）。
2. 实现注册接口：参数校验、重复账号处理。
3. 实现登录接口：密码校验通过后签发 JWT。
4. 编写鉴权中间件：解析 token、校验签名、注入用户上下文。
5. 将 Todo 接口改为必须鉴权访问。
6. 编写未登录/非法 token 的负例测试。

## 建议实践清单

- JWT 包含最小必要字段（user_id、exp）。
- token 过期时间合理设置，避免长期有效。
- 中间件返回统一 401 响应。

## 验收清单

- [ ] 注册/登录接口可用。
- [ ] Todo 接口未登录访问返回 401。
- [ ] 非法 token 返回 401。
- [ ] 关键鉴权路径有测试覆盖。

## 产出物

- 用户与认证相关接口代码。
- JWT 中间件实现。
- 鉴权测试用例。

## 常见风险与排查

- 密码明文落库：必须只存 bcrypt hash。
- token 校验只解码不验签：必须同时校验签名和过期时间。
